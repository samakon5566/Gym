@model prjGymEndTerm.ViewModels.COrderCourseViewModel

@{
    ViewData["Title"] = "backOrderEdit";
    Layout = "~/Views/Shared/_BackstageLayout.cshtml";
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>


<style>
    CCoachTitle {
        /*text-align: center;*/
        text-decoration: underline
    }

    .backCBody {
        padding: 50px 0 0 300px
    }

    .control-label {
        font-size: 20px;
        font-weight: 900
    }

    body {
        background-color: #efeff6
    }

    .page-breadcrumb {
        margin-bottom: 30px;
    }

    .breadcrumb-item {
        font-size: 15px
    }
</style>

<body>
    <div class="backCBody">

        <h1 class="CCoachTitle" style="font-weight:800"><i class="far fa-file-alt"></i> 修改訂單資料</h1>

        <div class="page-breadcrumb">
            <nav aria-label="breadcrumb" style="border-top: 1px solid #ADADAD ">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href=@Url.Action("List", "BackHome") class="breadcrumb-link">首頁</a></li>
                    <li class="breadcrumb-item"><a href=@Url.Action("backOrderList", "Backstage") class="breadcrumb-link">訂單管理</a></li>
                    <li class="breadcrumb-item active" aria-current="page">修改訂單資料</li>
                </ol>
            </nav>
        </div>

        <div>
            <div style="display:flex;justify-content:center" class="div">
                <form asp-action="backOrderEdit" id="form">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <input type="hidden" name="OrderId" value="@Model.OrderId" />

                    <table style="margin-left:70px">
                        <tr>
                            <td class="w-50" style="padding-right:130px;padding-top:15px;padding-left:20px">
                                <input asp-for="OrderClassId" hidden id="classId" />
                                <div class="form-group p-b-10" >
                                    <label asp-for="LogInName" class="control-label"></label>
                                    <input asp-for="LogInName" class="form-control" readonly="readonly" disabled="disabled" style="width:350px;height:40px" />
                                    <span asp-validation-for="LogInName" class="text-danger"></span>
                                </div>
                                <div class="form-group p-b-10">
                                    <label asp-for="CourseClassName" class="control-label"></label>
                                    <input asp-for="CourseClassName" class="form-control" readonly="readonly" disabled="disabled" style="width:350px;height:40px" />
                                    <span asp-validation-for="CourseClassName" class="text-danger"></span>
                                </div>
                                <div class="form-group p-b-10">
                                    <label asp-for="OrderTime" class="control-label"></label>
                                    <input asp-for="OrderTime" class="form-control" readonly="readonly" disabled="disabled" type="date" style="width:350px;height:40px" />
                                    <span asp-validation-for="OrderTime" class="text-danger"></span>
                                </div>
                                <div style="display:flex">

                                    <div class="form-group" >
                                        <label asp-for="OrderPaymentId" class="control-label" style="display:block"></label>

                                        <input value="1" asp-for="OrderPaymentId" type="radio" class="btn-check" id="success-outlined" autocomplete="off" checked>
                                        <label class="btn btn-outline-success" for="success-outlined" style="font-size:11px;margin-top:5px">信用卡</label>

                                        <input value="2" asp-for="OrderPaymentId" type="radio" class="btn-check" id="danger-outlined" autocomplete="off">
                                        <label class="btn btn-outline-danger m-l-10" for="danger-outlined" style="font-size: 11px; margin-top: 5px">現金</label>

                                        <input value="3" asp-for="OrderPaymentId" type="radio" class="btn-check" id="primary-outlined" autocomplete="off">
                                        <label class="btn btn-outline-primary m-l-10 " for="primary-outlined" style="font-size: 11px; margin-top: 5px">超商代碼</label>

                                        <span asp-validation-for="OrderPaymentId" class="text-danger"></span>
                                    </div>

                                    <div class="form-group p-b-10 m-l-25 w-25">
                                        <label asp-for="classMoney" class="control-label"></label>
                                        <input asp-for="classMoney" class="form-control" readonly="readonly" disabled="disabled" />
                                        <span asp-validation-for="classMoney" class="text-danger"></span>
                                    </div>

                                </div>
                            </td>
                            <td class="w-50">
                                <div class="form-group p-b-10">
                                    <label asp-for="OrderStatusId" class="control-label"></label>

                                    <select asp-for="OrderStatusId" class="form-select" aria-label="Default select example" style="width:350px;height:40px">
                                        <option value="1">退費</option>
                                        <option value="2">已取消</option>
                                        <option value="3">已付費</option>
                                    </select>

                                    @*<input asp-for="OrderStatusId" class="form-control" />*@
                                    <span asp-validation-for="OrderStatusId" class="text-danger"></span>
                                </div>
                                <div class="form-group p-b-10">
                                    <label asp-for="OrderReasonId" class="control-label"></label>

                                    <select asp-for="OrderReasonId" class="form-select" aria-label="Default select example" style="width:350px;height:40px">
                                        <option value=NULL></option>
                                        <option value="1">教練問題</option>
                                        <option value="2">設備問題</option>
                                        <option value="3">個人問題</option>
                                        <option value="4">報名人數不足</option>
                                    </select>

                                    @*<input asp-for="OrderReasonId" class="form-control" />*@
                                    <span asp-validation-for="OrderReasonId" class="text-danger"></span>
                                </div>
                                <div class="form-group p-b-10">
                                    <label asp-for="OrderReasonMoney" class="control-label"></label>
                                    <input asp-for="OrderReasonMoney" class="form-control" style="width:350px;height:40px" />
                                    <span asp-validation-for="OrderReasonMoney" class="text-danger"></span>
                                </div>
                                <div class="form-group ">
                                    <label asp-for="OrderReviseTime" class="control-label"></label>
                                    <input asp-for="OrderReviseTime" class="form-control" type="date" style="width:350px;height:40px" />
                                    <span asp-validation-for="OrderReviseTime" class="text-danger"></span>
                                </div>

                            </td>
                        </tr>
                    </table>
                    <div class="form-group">
                        <input type="submit" value="修改並儲存" class="btn btn-primary m-t-20 m-r-20" style="float:right" />

                        <a class="btn btn-info  m-t-20 m-r-20" data-toggle="modal" data-target="#exampleModal" style="color: white; float: right" id="lessonBtn">課程資訊</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>

<!-- Modal -->
<div class="modal fade " id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div id="lessonLoad">

            </div>
            <div class="modal-footer justify-content-center">
                <a href="#" class="btn btn-secondary w-50 " data-dismiss="modal">OK</a>
            </div>
        </div>
    </div>
</div>

@section Scripts {

    <script>

        $('#lessonBtn').on('click',function () {

            const classId = $('#classId').val()

            $('#lessonLoad').load('@Url.Content("~/BackApi/backOrderLessonBtn?classId=")' + classId)

        })


    </script>

<script>

    //當天日期
    $(document).ready(function () {
        var date = new Date();

        var day = date.getDate();
        var month = date.getMonth() + 1;
        var year = date.getFullYear();

        if (month < 10) month = "0" + month;
        if (day < 10) day = "0" + day;

        var today = year + "-" + month + "-" + day;

        $("#form input").eq(10).val(today);
    });

</script>

    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
